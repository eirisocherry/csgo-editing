//MAKE SURE YOU PUT +exec _core INTO YOUR LAUNCH OPTIONS!!!



//////////////////
//FFMPEG PRESETS//
//////////////////
mirv_streams settings add ffmpeg utAlpha "-c:v utvideo -pix_fmt rgba {QUOTE}{AFX_STREAM_PATH}_utALPHA.avi{QUOTE}";												//utALPHA
mirv_streams settings add ffmpeg utTrue "-c:v utvideo -pix_fmt gbrp {QUOTE}{AFX_STREAM_PATH}_utTrue.avi{QUOTE}";												//utTrue rgba 
mirv_streams settings add ffmpeg utLossless "-c:v utvideo -pix_fmt yuv444p {QUOTE}{AFX_STREAM_PATH}_utLossless.avi{QUOTE}";										//utLossless
mirv_streams settings add ffmpeg utGood "-c:v utvideo -pix_fmt yuv422p {QUOTE}{AFX_STREAM_PATH}_utGood.avi{QUOTE}";												//utGood
mirv_streams settings add ffmpeg PRORESXQ "-c:v prores -profile:v 5 {QUOTE}{AFX_STREAM_PATH}_proresxq.mov{QUOTE}";												//proresxq (alpha support) 
mirv_streams settings add ffmpeg LOSSLESS "-c:v libx264 -crf 1 -preset fast -tune fastdecode -pix_fmt yuv444p -level:v 5.2 -x264-params keyint=12:min-keyint=1:ref=1:bframes=0:qcomp=0.8:aq-strength=0.5:dct-decimate=0:fast-pskip=0:deblock=-2,-2 {QUOTE}{AFX_STREAM_PATH}_lossless.mp4{QUOTE}";		 //lossless
mirv_streams settings add ffmpeg GOOD "-c:v libx264 -crf 10 -preset fast -tune fastdecode -pix_fmt yuv444p -level:v 5.2 -x264-params keyint=12:min-keyint=1:ref=1:bframes=0:qcomp=0.8:aq-strength=0.5:dct-decimate=0:fast-pskip=0:deblock=-2,-2 {QUOTE}{AFX_STREAM_PATH}_good.mp4{QUOTE}";			  //good			
mirv_streams settings add ffmpeg LITE "-c:v libx264 -crf 20 -preset fast -tune fastdecode -pix_fmt yuv444p -level:v 5.2 -x264-params keyint=12:min-keyint=1:ref=1:bframes=0:qcomp=0.8:aq-strength=0.5:dct-decimate=0:fast-pskip=0:deblock=-2,-2 {QUOTE}{AFX_STREAM_PATH}_lite.mp4{QUOTE}";			  //lite
mirv_streams settings add ffmpeg LOSSLESS13 "-c:v libx264 -crf 1 -preset fast -tune fastdecode -pix_fmt yuv420p -level:v 5.2 -x264-params keyint=12:min-keyint=1:ref=1:bframes=0:qcomp=0.8:aq-strength=0.5:dct-decimate=0:fast-pskip=0:deblock=-2,-2 {QUOTE}{AFX_STREAM_PATH}_lossless13.mp4{QUOTE}";	   //lossless13
mirv_streams settings add ffmpeg GOOD13 "-c:v libx264 -crf 10 -preset fast -tune fastdecode -pix_fmt yuv420p -level:v 5.2 -x264-params keyint=12:min-keyint=1:ref=1:bframes=0:qcomp=0.8:aq-strength=0.5:dct-decimate=0:fast-pskip=0:deblock=-2,-2 {QUOTE}{AFX_STREAM_PATH}_good13.mp4{QUOTE}";			//good13
mirv_streams settings add ffmpeg LITE13 "-c:v libx264 -crf 20 -preset fast -tune fastdecode -pix_fmt yuv420p -level:v 5.2 -x264-params keyint=12:min-keyint=1:ref=1:bframes=0:qcomp=0.8:aq-strength=0.5:dct-decimate=0:fast-pskip=0:deblock=-2,-2 {QUOTE}{AFX_STREAM_PATH}_lite13.mp4{QUOTE}";			//lite13

//blur preset
mirv_streams settings add sampler blur								//blur
mirv_streams settings edit blur strength 1							//just dont touch
mirv_streams settings edit blur method rectangle					//just dont touch
mirv_streams settings edit blur exposure 1							//just dont touch



///////////////////////////////////
//FFMPEG PRESETS CODE EXPLANATION//
///////////////////////////////////
//GLOBAL PARAMETERS: 
//-vsync 1 ('constant framerate')
//-i ('input video')
//-y ('output video')
//-c:v ('video codec initialization')
//-c:a ('audio codec initialization' in hlae you can't record audio with ffmpeg so it's useless)
//
//X264 CODEC PARAMETERS:
//-crf 20 ('constant rate factor' aka quality; 1 - uncompressed *dont use it, so laggy*;  10 - amazing quality, huge size; 15 - best quality, big size; 20 - good quality, medium size; 25 - decent quality, small size)
//-preset fast (this preset is a golden mean, good quality and fast encode)
//-tune fastdecode (output less compressed, but playback speed is better)
//-level:v 5.2 (something like a quality limit, vegas works so bad with level 6+ that's why I locked it at 5.2, just remove this filter to unlock the limit)
//-pix_fmt yuv420p ('pixel format' yuv444p has the best colors while yuv420p supported by any program)
//keyint=12 ('I-frames interval' 1 - fast playback, but big file size; 12/30/60/120/250... - slow playback, but small file size)
//bframes=0 ('B-frames amount' 0 - for fast playback, 2 - for archive only cuz playback will stuck so hard)
//qcomp=0.8 ('Another quality thing' 0 - bad quality, small size; 1 - best quality, huge size)
//How to make an archive only video? Set 'keyint=250', 'bframes=2', 'qcomp=0.6', and delete '-tune fastdecode', enjoy, ur video size is super small now.
//
//QUICKTIME CODEC PARAMETERS
//Download: https://support.apple.com/kb/dl837?locale=en_US
//-profile:v 3 ('quality' 0 - trash; 1 - bad; 2 - not bad; 3 - medium; 4 - good; 5 - best & alpha support)
//
//You may ask: "Is it possible to record audio into these videos recorded with ffmpeg?" No, it's not, but you can record the audio separately with HLAE.



clear

echo ""
echo ""
echo "───────────────────────[FFMPEG-RECORDING]──────────────────────"
echo "Make sure you have installed ffmpeg, I showed 'how' in my tutorial (HLAE\ffmpeg shouldn't be empty)"
echo ""
echo "Tips:"
echo "1. To fix dull colors in old Sony Vegas versions make sure to set 'Pixel format: 32-bit (full range)' and 'View transform: Off' in project settings"
echo "2. If you wanna export transparent video from Sony Vegas make sure to check 'Render alpha channel' when exporting as uncompressed avi"
echo "3. If you wanna export transparent video from After Effects then choose 'Channels: RGB + ALPHA' and 'Color: Premultiplied' when exporting as uncompressed avi or mov" 
echo "───────────────────────────[PRESETS]───────────────────────────"
echo "It's just a list of presets, you can't interact with it in the game"
echo "View _core.cfg to adjust the recording settings for each layer"
echo "View _ffmpeg.cfg if you want to know more about ffmpeg and presets"
echo ""
echo "//UTVIDEO"
echo "Compatibility: Sony Vegas 13+, After Effects"
echo "Requirement: Ut Video Codec (videohelp.com/software/Ut-Video-Codec-Suite)"
echo "Issue: if you will record in more than 1000 fps it will be converted to 600 fps but the length will be longer to keep the frames amount
echo "Why it happens?  1000+ fps avi files don't work well with editing software so ut codec dev decided to make such thing
echo "utTrue     -> true rgb, original quality and amazing optimization"
echo "utLossless -> the depth map isn't perfect, unnoticeable quality loss"
echo "utGood     -> the depth map isn't perfect, the quality is a bit worse (impossible to notice anyways)"
echo "utAlpha    -> same as utTrue, but supports an alpha channel (made for alpha layers)"
echo ""
echo "//X264 (YUV444)"
echo "Compatibility: Sony Vegas 15+, After Effects
echo "Issues: Sony Vegas doesn't support mp4 files with odd values resolutions (ex: 1920x815 = BAD; 1920x816 = GOOD)
echo "lossless   -> for people who dont like the 'good' preset quality"
echo "good       -> the golden mean (best for most layers)"
echo "lite       -> if you have no space on your disk, this preset is the best choise"
echo ""
echo "//X264 (YUV420)"
echo "Compatibility: Sony Vegas 13+, After Effects
echo "Issues: doesn't work with odd values resolutions (ex: 1920x815 = BAD; 1920x816 = GOOD), green tint on the depth map (simply desaturate it)"
echo "lossless13 -> for people who dont like the quality of the 'good' preset"
echo "good13     -> best for overall layers"
echo "lite13     -> if you have no space on your disk, this preset is the best choise"
echo ""
echo "//QUICKTIME"
echo "Compatibility: Sony Vegas 19+, After Effects
echo "Requirement: Quicktime Codec (support.apple.com/kb/dl837?locale=en_US)"
echo "proresxq   -> supports an alpha channel, unlike utAlpha has much smaller size (made for alpha layers)"
echo ""
echo "//BLUR"
echo "Info: it uses one of the codecs above (view _core.cfg to adjust)"
echo "blur -> you should record in ~1000 fps to make a good motion blur, output video will be at 60 fps (edit _core.cfg to adjust the settings)"
echo ""
echo "//DEFAULT"
echo "afxClassic -> default screenshot recording"
echo "
echo "//WHAT TO CHOOSE?
echo "UTVIDEO = true colors, the best quality, amazing playback speed, but huge size"
echo "X264 = extremely small size, good quality, decent playback, but a bit distorted colors"
echo "QUICKTIME = for alpha layers only, for other layers it loses to UTVIDEO in everything"
echo "───────────────────────────────────────────────────────────────"
echo ""
echo ""


